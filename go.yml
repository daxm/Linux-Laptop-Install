---
- hosts: localhost
  pre_tasks:
    - name: APT DIST-UPGRADE
      apt:
        update_cache: yes
        upgrade: dist
      become: yes
      tags:
        - always

    - name: INSTALL PACKAGES
      apt:
        name: "{{ item }}"
        state: latest
      become: yes
      with_items: "{{ packages_list }}"
      tags:
        - always
 
    - name: SNAP -- REFRESH SNAPS
      command: snap refresh
      become: yes
      tags:
        - always

  tasks:
    - name: INSTALL GAMES
      apt:
        name: "{{ item }}"
        state: latest
      become: yes
      with_items: "{{ games_list }}"
      tags:
        - games

    - name: INSTALL LAPTOP UTILITIES
      apt:
        name: "{{ item }}"
        state: latest
      become: yes
      with_items: "{{ laptop_utils }}"
      tags:
        - laptop

    - name: SNAPS -- INSTALL PYCHARM COMMUNITY
      command: snap install pycharm-community --classic
      become: yes
      tags:
        - standard_install

    - name: SNAPS -- INSTALL OPERA
      command: snap install opera
      become: yes
      tags:
        - web
        - standard_install

    - name: SNAPS -- INSTALL MINECRAFT
      command: snap install minecraft
      become: yes
      tags:
        - games

  roles:
  - role: web
    tags:
      - web
      - standard_install

  - role: java
    tags:
      - java
      - standard_install

  - role: vmware
    tags:
      - vmware
      - standard_install
